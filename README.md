# -*- coding: utf-8 -*-

# Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ÛŒÚ© ÙØ§ÛŒÙ„ README.md Ø¨Ø§ Ù‚Ø§Ù„Ø¨ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ùˆ Ø¨Ø¬â€ŒÙ‡Ø§ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

# Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø®Ø²Ù† Ø´Ù…Ø§
GITHUB_USER = "hamedcode"
GITHUB_REPO = "port-based-v2ray-configs"
# Ù†Ø§Ù… ÙØ§ÛŒÙ„ workflow Ø´Ù…Ø§ Ø¯Ø± Ù¾ÙˆØ´Ù‡ .github/workflows/
# Ø§Ú¯Ø± Ù†Ø§Ù… Ø¯ÛŒÚ¯Ø±ÛŒ Ø¯Ø§Ø±Ø¯ØŒ Ø¢Ù† Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯. Ù…Ø«Ù„Ø§: 'main.yml'
WORKFLOW_FILE_NAME = "update-configs.yml"

# Ø³Ø§Ø®ØªØ§Ø± Ø¨Ø¬â€ŒÙ‡Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Markdown Ùˆ HTML Ø¨Ø±Ø§ÛŒ ÙˆØ³Ø·â€ŒÚ†ÛŒÙ† Ú©Ø±Ø¯Ù†
badges_section = f"""
<p align="center">
  <img src="https://img.shields.io/github/actions/workflow/status/{GITHUB_USER}/{GITHUB_REPO}/{WORKFLOW_FILE_NAME}?style=for-the-badge&logo=githubactions&logoColor=white" alt="GitHub Actions Workflow Status">
  <img src="https://img.shields.io/github/last-commit/{GITHUB_USER}/{GITHUB_REPO}?style=for-the-badge&logo=git&logoColor=white" alt="GitHub last commit">
  <img src="https://img.shields.io/github/repo-size/{GITHUB_USER}/{GITHUB_REPO}?style=for-the-badge&logo=github" alt="GitHub repo size">
  <img src="https://img.shields.io/github/license/{GITHUB_USER}/{GITHUB_REPO}?style=for-the-badge" alt="GitHub license">
  <br>
  <img src="https://img.shields.io/github/stars/{GITHUB_USER}/{GITHUB_REPO}?style=social" alt="GitHub stars">
  <img src="https://img.shields.io/github/forks/{GITHUB_USER}/{GITHUB_REPO}?style=social" alt="GitHub forks">
</p>
"""

# Ù…Ø­ØªÙˆØ§ÛŒ Ú©Ø§Ù…Ù„ ÙØ§ÛŒÙ„ README.md
readme_template = f"""
{badges_section.strip()}

# Port-Based V2Ray Configs

This repository contains a collection of V2Ray configurations, aggregated from various public sources. The configs are automatically categorized by protocol and port using a Python script.

---

## ğŸ“Š Config Stats

<!-- START-STATS -->
<!-- This section is automatically generated by the script. Do not remove. -->
<!-- END-STATS -->

---

## ğŸ”— Subscription Links

<!-- START-LINKS -->
<!-- This section is automatically generated by the script. Do not remove. -->
<!-- END-LINKS -->

---

## ğŸ“š Sources & Summary

<!-- START-SOURCES -->
<!-- This section is automatically generated by the script. Do not remove. -->
<!-- END-SOURCES -->
""".strip()

# Ù†Ø§Ù… ÙØ§ÛŒÙ„ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒÙ… Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒÙ…
file_name = "README.md"

try:
    # ÙØ§ÛŒÙ„ Ø±Ø§ Ø¯Ø± Ø­Ø§Ù„Øª Ù†ÙˆØ´ØªÙ† (write mode) Ø¨Ø§ Ø§Ù†Ú©ÙˆØ¯ÛŒÙ†Ú¯ utf-8 Ø¨Ø§Ø² Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
    with open(file_name, "w", encoding="utf-8") as f:
        f.write(readme_template)
    
    print(f"File '{file_name}' was created successfully with badges.")
    print("You can now run your main script to populate it with data.")
    print(f"IMPORTANT: Make sure your GitHub Actions workflow file is named '{WORKFLOW_FILE_NAME}' for the status badge to work.")

except IOError as e:
    print(f"Error while creating file '{file_name}': {e}")
